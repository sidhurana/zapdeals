from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI()

# Allow CORS for the frontend
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],  # Allow the frontend URL
    allow_credentials=True,
    allow_methods=["*"],  # Allows all methods
    allow_headers=["*"],  # Allows all headers
)

# Sample deals (10 listings)
deals = [
    {"id": 1, "title": "50% Off MacBook Pro", "description": "Limited time deal at BestBuy", "url": "https://bestbuy.com"},
    {"id": 2, "title": "Buy 1 Get 1 Free Shoes", "description": "Nike running shoes discount", "url": "https://nike.com"},
    {"id": 3, "title": "30% Off iPads", "description": "Amazon has a great deal on iPads", "url": "https://amazon.com"},
    {"id": 4, "title": "20% Off KitchenAid Mixer", "description": "KitchenAid stand mixer on sale!", "url": "https://kitchenaid.com"},
    {"id": 5, "title": "15% Off Fitbit", "description": "Fitness tracker at a discount", "url": "https://fitbit.com"},
    {"id": 6, "title": "25% Off Echo Dot", "description": "Smart speaker deal", "url": "https://amazon.com"},
    {"id": 7, "title": "Buy 2 Get 1 Free Books", "description": "Books sale at Barnes & Noble", "url": "https://barnesandnoble.com"},
    {"id": 8, "title": "40% Off Coffee Maker", "description": "Great deal on a coffee maker", "url": "https://target.com"},
    {"id": 9, "title": "60% Off Outdoor Furniture", "description": "Summer clearance on patio sets", "url": "https://wayfair.com"},
    {"id": 10, "title": "Buy 1 Get 1 Free Phone Cases", "description": "Limited time phone case offer", "url": "https://amazon.com"},
]

@app.get("/api/deals")
def get_deals():
    return deals

